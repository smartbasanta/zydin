/* src/assets/css/_components.css */

/* ================== Buttons ================== */
.btn {
    @apply inline-flex items-center justify-center gap-2 cursor-pointer px-5 py-2.5 text-base font-semibold tracking-wide rounded-md transition-all duration-200 ease-in-out border border-transparent shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2;
    @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:shadow-none active:translate-y-px active:shadow-none;
}

.btn-primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    @apply focus:ring-[var(--btn-primary-bg)];
}

.btn-primary:hover {
    background-color: var(--btn-primary-hover);
}

.btn-secondary {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    border-color: var(--border-muted);
    @apply focus:ring-[var(--btn-primary-bg)];
}

.btn-secondary:hover {
    background-color: var(--btn-secondary-hover);
}

.btn-danger {
    background-color: var(--btn-danger-bg);
    color: var(--btn-danger-text);
    @apply focus:ring-[var(--btn-danger-bg)];
}

.btn-danger:hover {
    background-color: var(--btn-danger-hover);
}

.btn-success {
    background-color: var(--btn-success-bg);
    color: var(--btn-success-text);
    @apply focus:ring-[var(--btn-success-bg)];
}

.btn-success:hover {
    background-color: var(--btn-success-hover);
}

.btn-icon {
    @apply !p-0 !size-10 justify-center rounded-full;
}

.btn-icon.is-square {
    @apply !rounded-md;
}

.btn-glass {
    background: var(--btn-glass-bg);
    color: var(--btn-glass-text);
    border-color: var(--btn-glass-border);
    backdrop-filter: blur(8px);
    transition: all 0.3s ease;
}

.btn-glass:hover {
    background: var(--btn-glass-hover);
    transform: scale(1.03);
}

.table-action-btn {
    @apply relative inline-flex items-center justify-center size-8 rounded-lg bg-white/60 dark:bg-white/5 border border-gray-200/60 dark:border-gray-800/60 backdrop-blur-md shadow-lg dark:shadow-black/50 text-gray-800 dark:text-gray-200 transition-all duration-300 hover:scale-105;
}

/* ================== Forms & Inputs ================== */
.label {
    @apply block text-sm font-medium;
    color: var(--label-text);
}

.input {
    @apply w-full rounded-lg border bg-transparent px-4 py-2.5 text-sm transition-all duration-200 ease-in-out focus:outline-none focus:ring-2;
    background-color: var(--input-bg);
    border-color: var(--input-border);
    color: var(--input-text);
    @apply focus:ring-[var(--input-focus-ring)] focus:border-[var(--input-focus-ring)];
    @apply placeholder:text-[var(--input-placeholder)];
    @apply disabled:opacity-60 disabled:bg-gray-100 dark:disabled:bg-gray-800 disabled:cursor-not-allowed;
}

.invalid-input {
    @apply !border-[var(--input-invalid-border)] focus: !ring-[var(--input-invalid-border)];
}

.dirty-input {
    @apply !border-[var(--input-dirty-border)];
}

.checkbox {
    @apply appearance-none shrink-0 h-5 w-5 rounded-md border-2 bg-transparent transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 hover:border-[var(--input-focus-ring)] cursor-pointer;
    border-color: var(--checkbox-border);
    @apply focus:ring-[var(--input-focus-ring)];
}

.checkbox:checked {
    background-color: var(--checkbox-checked-bg);
    border-color: var(--checkbox-checked-border);
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
}

/* ================== Cards ================== */
.card-backdrop {
    background: var(--card-backdrop-bg);
    border: 1px solid var(--card-backdrop-border);
    @apply rounded-2xl p-8 md:p-10 shadow-xl backdrop-blur-xl;
}

.auth-card {
    @apply relative w-full max-w-lg mx-auto rounded-xl border shadow-xl overflow-hidden;
    background: linear-gradient(to bottom right, var(--card-bg), color-mix(in srgb, var(--card-bg) 90%, black));
    border-color: var(--card-border);
}

.auth-card::before,
.auth-card::after {
    content: '';
    @apply absolute w-64 h-64 rounded-full blur-3xl opacity-20 pointer-events-none z-0;
}

.auth-card::before {
    background-color: var(--input-focus-ring);
    @apply -top-20 -left-20;
}

.auth-card::after {
    background-color: var(--btn-success-bg);
    @apply -bottom-20 -right-20;
}

.auth-card-content {
    @apply relative z-10;
}

/* ================== Dropdowns & Menus ================== */
.header-menu-trigger {
    @apply relative flex items-center justify-center p-2.5 rounded-full cursor-pointer;
    @apply bg-transparent hover:bg-secondary-1200/50 dark:hover:bg-pink-400/50;
    @apply text-primary-1200/80 dark:text-primary-1200;
    @apply transition-all duration-200;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 dark:focus-visible:ring-blue-400;
    @apply hover:scale-105 active:scale-95;
}

.header-menu-trigger.active {
    @apply bg-secondary-1200/60 dark:bg-pink-500/60;
    @apply scale-105;
}

.menu-dropdown-panel {
    @apply absolute right-0 mt-2 w-56 origin-top-right rounded-xl border z-50;
    @apply bg-gradient-to-tl from-secondary-800/95 to-secondary-100/95 backdrop-blur-lg;
    @apply dark:from-pink-300 dark:to-pink-200;
    @apply border-secondary-500/80 dark:border-pink-400/90;
    @apply shadow-xl shadow-black/10 dark:shadow-black/20;
    @apply overflow-hidden;
}

.nav-menu-panel {
    @apply absolute left-1/2 -translate-x-1/2 mt-2 min-w-64 max-w-96 origin-top rounded-xl border z-50;
}

.menu-dropdown-panel::before {
    content: '';
    @apply absolute -top-1/2 -right-1/2 w-48 h-48;
    @apply dark:from-pink-500/20;
    @apply blur-3xl rounded-full;
    @apply pointer-events-none;
    @apply animate-pulse;
    animation-duration: 5s;
    background-image: radial-gradient(circle, rgba(60, 127, 251, 0.3), transparent);
}

.dark .menu-dropdown-panel::before {
    background-image: radial-gradient(circle, rgba(249, 115, 22, 0.2), transparent);
}

.menu-dropdown-item {
    @apply flex w-full items-center gap-3 px-4 py-2.5;
    @apply text-left text-sm font-medium text-gray-1000 dark:text-pink-950;
    @apply cursor-pointer transition-all duration-150;
    @apply hover:bg-gradient-to-br hover:from-secondary-1250/50 dark:hover:from-pink-400 hover:to-transparent hover:text-primary-1200 dark:hover:text-pink-950;
    @apply focus:outline-none focus:bg-gradient-to-r focus:from-blue-500/10 focus:to-transparent focus:text-blue-600 dark:focus:text-blue-400;
    @apply hover:scale-105 active:scale-95;
}

.menu-dropdown-item.active {
    @apply text-secondary-1200 dark:text-pink-950 font-extrabold;
    @apply bg-gradient-to-br from-secondary-1250/30 dark:from-pink-400/30 to-transparent;
}

/* ================== Tables ================== */
.data-table {
    @apply relative rounded-lg overflow-hidden bg-gray-0 dark:bg-gray-800 border border-gray-100 dark:border-gray-1000;

    table {
        @apply bg-gray-0 dark:bg-gray-1200/5 text-sm text-left w-full border-collapse;
    }

    table thead {
        @apply text-gray-700 dark:text-gray-500 bg-gray-100 dark:bg-gray-1100 text-sm capitalize leading-4;
    }

    table thead tr th {
        @apply p-4;
    }

    table tbody tr {
        @apply border-b border-gray-100 dark:border-gray-1000 hover:bg-white dark:hover:bg-gray-1250 transition duration-200;
    }

    table tbody tr td {
        @apply p-4;
    }
}

.pagination-button {
    @apply flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium transition-all;
    color: var(--text-muted);
}

.pagination-button:hover {
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
}

.pagination-button:disabled {
    @apply opacity-50 cursor-not-allowed;
}

.pagination-button.bg-primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
}

/* ================== Header & Footer ================== */
.header-bg {
    background: var(--header-bg);
}

.header-text {
    color: var(--header-text);
}

.header-logo-text {
    color: var(--header-text);
}

.header-tagline {
    color: var(--header-text);
    opacity: 0.8;
}

.footer-bg {
    background: var(--footer-bg);
}

.footer-text {
    color: var(--footer-text);
}

.footer-heading {
    color: var(--footer-heading);
    @apply text-base font-semibold uppercase tracking-wider;
}

.footer-link {
    color: var(--footer-link);
    @apply inline-block transition-all duration-200 hover:translate-x-1;
}

.footer-link:hover {
    color: var(--footer-link-hover);
}

.footer-social-link {
    @apply grid place-content-center size-10 rounded-full transition-all duration-300;
    color: var(--header-text);
    background-color: var(--footer-social-bg);
    border: 1px solid var(--footer-social-border);
}

.footer-social-link:hover {
    background-color: color-mix(in srgb, var(--footer-social-bg) 50%, #fff);
    transform: scale(1.1);
}

/* ================== Mobile Nav ================== */
.mobile-nav-panel {
    @apply relative w-full max-w-lg mx-auto border;
    @apply bg-gradient-to-br from-white/70 to-white/70;
    @apply dark:from-gray-1100/70 dark:to-gray-1200/70;
    @apply border-gray-200/80 dark:border-gray-800/80;
    @apply shadow-xl shadow-black/5 dark:shadow-black/20;
    @apply overflow-hidden;
}

.mobile-nav-panel::before,
.mobile-nav-panel::after {
    content: '';
    @apply absolute w-64 h-64 rounded-full blur-3xl opacity-30;
    @apply dark:opacity-20;
    @apply pointer-events-none;
    z-index: 0;
}

.mobile-nav-panel::before {
    @apply bg-blue-400 -top-20 -left-20;
}

.mobile-nav-panel::after {
    @apply bg-cyan-400 -bottom-20 -right-20;
}

.mobile-nav-link {
    @apply block text-lg font-semibold p-3 rounded-lg transition-colors duration-200;
    color: var(--label-text);
}

.mobile-nav-link:hover {
    background-color: var(--btn-secondary-bg);
}

.mobile-nav-link-active {
    color: var(--btn-primary-bg);
}

.mobile-nav-link-exact-active {
    background-color: color-mix(in srgb, var(--btn-primary-bg) 10%, transparent);
    color: var(--btn-primary-bg);
}

.mobile-nav-sublink {
    @apply block text-base font-medium p-2 rounded-lg transition-colors duration-200;
    color: var(--text-muted);
}

.mobile-nav-sublink:hover {
    background-color: var(--btn-secondary-bg);
}

/* ================== Additional Button Variants ================== */
/* Secondary Border Button */
.btn-secondary-border {
    @apply text-xs px-3 py-1.5;
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    border-color: var(--border-muted);
    @apply border border-b-2;
    @apply hover:bg-gray-300 dark:hover:bg-gray-800;
    @apply hover:border-b-gray-500 dark:hover:border-b-gray-800;
    @apply focus:ring-orange-500;
}

/* Ghost Button */
.btn-ghost {
    @apply bg-transparent shadow-none;
    color: var(--text-muted);
    @apply border border-transparent;
    @apply hover:bg-gray-100/70 dark:hover:bg-gray-900/70;
    @apply hover:shadow-sm;
    @apply focus:ring-orange-500;
    @apply active:translate-y-0 active:shadow-none;
}

/* Outline Button */
.btn-outline {
    @apply bg-transparent;
    color: var(--btn-primary-text);
    border-color: var(--btn-primary-bg);
    @apply border border-b-2;
    @apply hover:bg-orange-50 dark:hover:bg-orange-950;
    @apply hover:border-orange-700 dark:hover:border-orange-400;
    @apply hover:border-b-orange-800 dark:hover:border-b-orange-500;
    @apply focus:ring-orange-500;
}

/* Link Button */
.btn-link {
    @apply bg-transparent shadow-none border-none;
    @apply px-0 py-0;
    color: var(--btn-primary-text);
    @apply underline underline-offset-4;
    @apply hover:text-orange-700 dark:hover:text-orange-300;
    @apply hover:no-underline;
    @apply active:translate-y-0 active:shadow-none;
    @apply focus:ring-orange-500 rounded;
}

/* Icon Button Variations */
.btn-icon.is-square {
    @apply rounded-md;
}

.btn-icon-primary {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    @apply border-b-2;
    border-bottom-color: var(--btn-primary-hover);
    @apply hover:bg-orange-700;
    @apply hover:border-b-orange-800;
    @apply focus:ring-orange-500;
}

/* Toggle Button */
.btn-toggle {
    @apply px-4 py-1.5 text-sm font-medium rounded-full;
    background-color: var(--btn-secondary-bg);
    color: var(--btn-secondary-text);
    border-color: var(--border-muted);
    @apply border;
    @apply transition-all duration-200 ease-in-out;
    @apply hover:bg-gray-200 dark:hover:bg-gray-800;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-gray-1100 focus:ring-orange-500;
    @apply disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-gray-100 dark:disabled:bg-gray-900 disabled:text-gray-400 dark:disabled:text-gray-600 disabled:border-gray-200 dark:disabled:border-gray-800;
    @apply shadow-none;
}

/* Toggle Active State */
.btn-toggle.is-active {
    background-color: var(--btn-primary-bg);
    color: var(--btn-primary-text);
    border-color: var(--btn-primary-bg);
    @apply hover:bg-orange-700 dark:hover:bg-orange-700;
    @apply hover:border-orange-700 dark:hover:border-orange-700;
}

.btn-toggle.is-active-info {
    background-color: var(--btn-info-bg);
    color: var(--btn-info-text);
    border-color: var(--btn-info-bg);
    @apply hover:bg-blue-700 dark:hover:bg-blue-700;
    @apply hover:border-blue-700 dark:hover:border-blue-700;
}

/* Soft Buttons */
.btn-soft {
    background-color: var(--btn-soft-bg);
    color: var(--btn-soft-text);
    border-color: var(--btn-soft-border);
    @apply border border-b-2;
    @apply shadow-none;
    @apply hover:bg-orange-100 dark:hover:bg-orange-900;
    @apply hover:border-orange-300 dark:hover:border-orange-700;
    @apply hover:border-b-orange-400 dark:hover:border-b-orange-600;
    @apply focus:ring-orange-500;
    @apply active:translate-y-px active:shadow-none;
}

.btn-soft-info {
    background-color: var(--btn-soft-info-bg);
    color: var(--btn-soft-info-text);
    border-color: var(--btn-soft-info-border);
    @apply border border-b-2;
    @apply hover:bg-blue-100 dark:hover:bg-blue-900;
    @apply hover:border-blue-300 dark:hover:border-blue-700;
    @apply hover:border-b-blue-400 dark:hover:border-b-blue-600;
    @apply focus:ring-blue-500;
}

.btn-soft-success {
    background-color: var(--btn-soft-success-bg);
    color: var(--btn-soft-success-text);
    border-color: var(--btn-soft-success-border);
    @apply border border-b-2;
    @apply hover:bg-green-100 dark:hover:bg-green-900;
    @apply hover:border-green-300 dark:hover:border-green-700;
    @apply hover:border-b-green-400 dark:hover:border-b-green-600;
    @apply focus:ring-green-600;
}

.btn-soft-destructive {
    background-color: var(--btn-soft-destructive-bg);
    color: var(--btn-soft-destructive-text);
    border-color: var(--btn-soft-destructive-border);
    @apply border border-b-2;
    @apply hover:bg-red-100 dark:hover:bg-red-900;
    @apply hover:border-red-300 dark:hover:border-red-700;
    @apply hover:border-b-red-400 dark:hover:border-b-red-600;
    @apply focus:ring-red-500;
}

/* Ghost Outline Button */
.btn-ghost-outline {
    @apply bg-transparent shadow-none;
    color: var(--text-muted);
    @apply border border-transparent;
    @apply border-b-transparent;
    @apply hover:bg-gray-50/50 dark:hover:bg-gray-900/50;
    @apply hover:border-gray-200 dark:hover:border-gray-800;
    @apply hover:border-b-gray-300 dark:hover:border-b-gray-700;
    @apply focus:ring-orange-500;
    @apply active:translate-y-0 active:shadow-none;
}

.btn-ghost-outline-primary {
    color: var(--btn-primary-text);
    @apply hover:bg-orange-50/50 dark:hover:bg-orange-950/50;
    @apply hover:border-orange-200 dark:hover:border-orange-800;
    @apply hover:border-b-orange-300 dark:hover:border-b-orange-700;
    @apply focus:ring-orange-500;
}

/* Pagination Button */
.pagination-button {
    @apply flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium transition-all disabled:pointer-events-none cursor-pointer;
    @apply hover:bg-rose-100 hover:text-rose-700 dark:hover:bg-rose-500/20 dark:hover:text-rose-100;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-rose-400 dark:focus-visible:ring-rose-500;
}

/* ================== Links ================== */
.link {
    color: var(--btn-primary-text);
    @apply font-medium underline-offset-4;
    @apply hover:underline;
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-orange-500 rounded;
}

/* ================== Living Access Graph ================== */
.graph-node {
    @apply relative flex items-center gap-4 p-3 rounded-lg cursor-pointer transition-all duration-300;
    @apply bg-gray-900/50 backdrop-blur-sm border border-gray-700/50;
    @apply hover:bg-gray-800/70 hover:border-gray-500 hover:scale-105;
}

.graph-node.active {
    @apply scale-105 border-2;
}

#access-graph-container.is-inspecting .graph-node:not(.active) {
    @apply opacity-30 scale-95;
}

.user-node.active {
    @apply border-cyan-400;
}

.role-node.active {
    @apply border-orange-400;
}

.perm-node.active {
    @apply border-lime-400;
}

.node-icon {
    @apply flex-shrink-0 grid place-content-center size-12 text-2xl rounded-lg border-2;
}

.graph-node.expiring {
    @apply border-yellow-500/80 bg-yellow-900/30;
}

.graph-node.unused {
    @apply border-dashed border-gray-600 bg-gray-900/30 opacity-70;
}

.connection-line {
    stroke-width: 2;
    stroke: #4b5563;
    opacity: 0.3;
    transition: all 0.3s ease-in-out;
}

#access-graph-container.is-inspecting .connection-line {
    opacity: 0.1;
}

.connection-line.active {
    opacity: 1;
    stroke-width: 3;
}

.connection-line.user-role {
    stroke: #67e8f9;
}

.connection-line.role-perm {
    stroke: #84cc16;
}